<div class="form-box">
    <h3>Get In Touch</h3>

    <!-- Success Popup -->
    <div class="popup-success" id="popupSuccess">Thank you! Your message has been submitted successfully.</div>

    <form id="contactForm" action="https://script.google.com/macros/s/AKfycbxTdENZyjBpvIOmh_JJKDsw9wGHTj6UkSEsKaT07s-ZIXimlgxcnJ3dJY19ErPo3BlO/exec" method="post" data-gtm-form-interact-id="0">
        <input type="text" id="name" name="name" class="form-controls" placeholder="Name" required data-gtm-form-interact-field-id="0">
        <input type="email" id="email" name="email" class="form-controls" placeholder="Email" required data-gtm-form-interact-field-id="1">
        <input type="text" id="mobile" name="mobile" class="form-controls" placeholder="Mobile Number" required data-gtm-form-interact-field-id="2">

        <select class="form-controls" id="service" name="service" required data-gtm-form-interact-field-id="3">
            <option value="default" selected="">Service</option>
            <option value="Mobile Application">Mobile Application</option>
            <option value="Web Application">Web Application</option>
            <option value="Digital Marketing">Digital Marketing</option>
            <option value="Game Development">Game Development</option>
            <option value="Augmented Reality (AR)">Augmented Reality (AR)</option>
            <option value="Virtual Reality (VR)">Virtual Reality (VR)</option>
            <option value="Blockchain Technology">Blockchain Technology</option>
            <option value="AI-Powered Solutions">AI-Powered Solutions</option>
            <option value="UI/UX">UI/UX</option>
        </select>

        <textarea id="message" name="message" class="form-controls" placeholder="Message" rows="3" required style="width: 288px; height: 50px;" data-gtm-form-interact-field-id="4"></textarea>

        <!-- Hidden Date Field -->
        <input type="hidden" name="date" id="date">

        <div class="about-button">
            <button type="submit" class="theme-btn">Send Message</button>
        </div>
    </form>
</div>

<style>
    .popup-success {
        display: none;
        position: fixed;
        z-index: 9999;
        background: #28a745;
        color: #fff;
        padding: 20px 30px;
        border-radius: 10px;
        font-weight: bold;
        top: 20px;
        left: 50%;
        transform: translateX(-50%);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
    }
</style>

<script>
    // Set today's date in hidden field
    document.getElementById('date').value = new Date().toISOString().split('T')[0];

    const form = document.getElementById('contactForm');
    const popup = document.getElementById('popupSuccess');

    form.addEventListener('submit', function (e) {
        e.preventDefault();

        const formData = new FormData(form);

        fetch(form.action, {
            method: 'POST',
            body: formData
        }).then(response => {
            if (response.ok) {
                popup.style.display = 'block';
                setTimeout(() => {
                    popup.style.display = 'none';
                }, 3000);
                form.reset();
                // Reset date again after reset
                document.getElementById('date').value = new Date().toISOString().split('T')[0];
            } else {
                alert("Submission failed. Try again.");
            }
        }).catch(error => {
            alert("Something went wrong!");
            console.error(error);
        });
    });
</script>
